## `readObject()` 메서드는 방어적으로 구현하라

### 왜?

- `readObject()` == __숨겨진 생성자__
- 생성자와 같은 문제를 가지고 있음 

### `writeUnshared()`와 `readUnshared()` 함수

- Java 1.4부터 추가됨
- 방어적 복사 없이도 악의적 객체 참조 공격을 막을 수 있음
- __ElvisStealer 공격__과 본질적으로 유사한 __복잡한 공격__에는 취약하다. 

### 요약

- `private`로 남아있어야 하는 객체 참조 필드를 가진 클래스는 그런 필드가 가리키는 객체를 방어적으로 복사해라.
  ex) 변경 불가능 클래스의 변경 가능 컴포넌트
- __불변식__을 검사해서 위반된 사실이 감지될 경우 `InvalidObjectException`을 던져라.
- 객체를 완전히 역직렬화 한 다음, 전체 객체 그래프의 유효성을 검사햐야 하는 경우,
  `ObjectInputValidation` 인터페이스를 이용하라.
- 직/간접적으로 __재정의 가능 메서드__는 __호출하지 마라.__

### 정리

-  클라이언트가 가질 수 없는 객체 참조를 담은 모든 필드를 방어적으로 복사해야 한다.
-  `writeUnshared()`와 `readUnshared()` 함수는 사용하지 마라.
-  __직렬화 프락시 패턴__을 사용하는 것도 한 방법