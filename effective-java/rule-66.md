## 변경 가능 공유 데이터에 대한 접근은 동기화하라.

### 왜?

- 상호 배제성
- 스레드 간의 안정적 통신

### 자바 언어 명세

- `long`이나 `double`이 아닌 변수를 읽으면 나오는 값은 항상 어떤 스레드가 저장한 값

### 메모리 모델

- 한 스레드가 만든 변화를 다른 스레드가 볼 수 있게 되는 시점과 그 절차를 규정한다.
- [참고 자료](http://changsuk.me/?p=2050)

### `Thread.stop()`

- 절대 이용하지 마라.

### 생존 오류

- 살아 있기는 하나 더 진행하지는 못하는 프로그램

### 동기화 적용

- `synchronized`, `volatile` 
- __읽기 연산__과 __쓰기 연산__에 전부 적용하지 않으면 __동기화__는 아무런 효과도 없다.

### 안전 오류

- 여러 스레드가 같은 값을 가짐

  ```java
  private static volatile int nextSerialNumber = 0;

  public static int generateSerialNumber() {
  	return nextSerialNumber++;
  }
  ```

### 실질적으로 변경 불가능한 객체

- 특정 스레드만 객체를 변경할 수 있도록 함
- 변경이 끝난 후 다른 스레드와 공유가 가능하도록 함
- 즉, __객체 참조__를 공유하는 부분만 __동기화__함
- 이런 객체를 __실질적으로 변경 불가능한 객체__라 함

### 정리

- 변경 가능 데이터를 공유하지 않는다.
- 변경 불가능 데이터를 공유한다.
- 아예 공유하지 마라.
- __변경 가능 데이터는 한 스레드만 이용하도록 하라.__
- __변경 가능한 데이터를 공유할 때는 해당 데이터를 읽거나 쓰는 모든 스레드에 동기화를 수행하도록 하라.__

