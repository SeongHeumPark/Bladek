## 6.1 RxAndroid 소개

- 안드로이드 개발 중 가장 어려움을 겪는 문제 중 하나는 복잡한 스레드 사용
- 스레드 사용으로 발생하는 문제
  - 비동기 처리 및 에러 핸들링
  - 디버깅 문제
  - 2개의 비동기 처리 후 결과를 하나로 합성하는 작업
  - 이벤트 중복 실행
- RxAndroid 장점
  - 간단한 코드로 복잡한 병행 프로그래밍을 할 수 있음
  - 비동기 구조에서 에러를 다루기 쉬움
  - 함수형 프로그래밍 기법도 부분적 적용 가능

## 6.2 Rx Android 기본

- RxAndroid의 기본 구성 요소는 RxJava와 같음

- 예제

  ```java
  // 1. Observable 생성.
  Observable.create()
    // 2. 구독자 이용.
    .subscribe();

    // 3. 스케줄러 이용.
    .subscribeOn(Schedulers.io())
    .observeOn(AndroidSchedulers.mainThread())
  ```

- RxAndroid에서 제공하는 스케줄러

  | 스케줄러 이름                         | 설명                        |
  | ------------------------------- | ------------------------- |
  | AndroidSchedulers.mainThread()  | 안드로이드의 UI 스레드에서 동작하는 스케줄러 |
  | HandlerSchedulers.from(handler) | 특정 핸들러에 의존하여 동작하는 스케줄러    |

### 6.2.2 제어 흐름

- 예제

  ```java
  Iterable<String> samples = Arrays.asList(
    "banana", "orange", "apple", "apple mango", "melon", "watermelon");

  Observable.fromIterable(samples)
    .filter(s -> s.contains("apple"))
    .first("Not Found")
    .subscribe(s -> Log.d(TAG, s));
  ```

  - 기존 자바의 `for` 문을 `filter()` 함수와 `first()` 함수를 이용하여 대체함

### 6.2.3 RxLifecycle 라이브러리

- 안드로이드의 `Activity`와 `Fragment`의 라이프 사이클을 RxJava에서 사용할 수 있게 함

- 안드로이드 UI와 라이프 사이클을 대체 X
  __구독할 때 발생할 수 있는 메모리 누수를 방지하기 위해 사용__

- 컴포넌트 목록: p.210

- 예제

  ```java
  public class MainActivity extends RxAppCompatActivity {
    private static final String TAG = MainActivity.class.getSimpleName();

    @BindView(R.id.text_view)
    TextView textView;

    private Unbinder unbinder;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);

      unbinder = ButterKnife.bind(this);

      Observable.just("Hello. rx world!")
        .compose(bindToLifecycle())
        .subscribe(textView::setText);
    }

    @Override
    protected void onDestroy() {
      super.onDestroy();

      if (unbinder != null) {
        unbinder.unbind();
      }
    }
  }
  ```

  - `compose()` 함수로 라이프 사이클을 관리함 (`MainActivity`가 종료되면 자동으로 해제)
  - 직접 `dispose()` 함수를 호출해 라이프 사이클을 관리할 수 있음 (각각 장단이 있음 > 상황에 맞게 사용)

### 6.2.4 UI 이벤트 처리

#### 이벤트 리스너

