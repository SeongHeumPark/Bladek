## 03. 함수

### 작게 만들어라

- 20줄도 길다. 최대한 줄일 것
- __블록과 블여쓰기__
  - `if`, `if-else`, `swtich`, `while` 등 들어가는 블록은 한 줄이어야 함
  - __encoding function__의 규모가 작아질 뿐만 아니라, 이름을 적절히 짓는 다면 이해하기도 쉬워짐
  - 들여쓰기 수준도 1단이나 2단을 넘어서는 안됨
  - 즉, __중첩 구조__가 생길 만큼 함수가 커져서는 안됨

### 한 가지만 해라!

- __함수는 한 가지를 해야 한다.__
- __그 한 가지를 잘 해야 한다.__
- __그 한 가지만을 해야 한다.__
- 다른 함수로 추출할 수 있다면 그 함수는 여러 작업을 하고 있는 것

### 함수 당 추상화 수준은 하나로!

- 추상화 수준? 무슨 의미인가?
- __내려가기 규칙__
  - 코드는 위에서 아래로 이야기처럼 읽혀야 좋다.
  - 위에서 아래로 프로그램을 읽으면 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.
- 추상화 수준이 하나인 함수를 구현하기란 쉽지 않음
- __핵심__은 __한 가지만 하는 함수__

### `Switch` 문

- `switch`문은 작게 만들기 어려움

- __다형성__을 이용해 저차원 클래스에 숨기고 절대로 반복하지 않는 방법이 있음

- 아래 코드에는 문제점이 몇가지 있음

  ```java
  public Money calculatePay(Employee e) throw InvaliEmployeeType {
  	switch (e.type) {
      	case COMMISSIONED:
          	return calculateCommissionedPay(e);
      	case HOURLY:
          	return calculateHourlyPay(e);
      	case SALARIED:
          	return calculateSalariedPay(e);
      	default:
          	throw new InvalidEmployeeType(e.type);
  	}
  }
  ```

  - 함수가 김 (새 직원 유형을 추가하면 더 길어짐)
  - __한 가지__ 작업만 수행하지 않음
  - SRP(Single Responsibility Principle) 위반 (코드를 변경할 이유가 여럿이기 때문)
  - OCP(Open Close Principle) 위반 (새 직원 유형을 추가할 때마다 코드를 변경하기 때문)

### 서술적인 이름을 사용하라!

- 2장에서 했던 얘기의 반복
- ~~`DataHomeItemPhotoStickyAdapter` 클래스의 `getView()` 함수 참고~~

### 함수 인수

- 0개가 이상적

- 단항 함수
  - 인수에 질문을 던지는 경우 사용
  - 인수를 뭔가로 변환해 결과를 반환하는 경우 사용

- 플래그 인수
  - 추함
  - 한 함수에서 여러가지 일을 하겠다고 공표

- 이항 함수
  - 순서, 주춤, 무시로 문제가 야기될 수 있음
  - 일반적이면서 자연적인 순서를 따르는 경우 사용
    ex) `Point point = new Point(0, 0);`

- 삼항 함수

  - 순서, 주춤, 무시로 야기되는 문제가 두 배 이상
  - 이항 함수때 보다 더 신중

- 인수 객체

  - 인수가 늘어날 때 줄일 수 있는 방법

    ```java
    Circle makeCircle(double x, double y, double radius);
    Circle makeCircle(Point center, double radius);
    ```

    - 눈속임이라 생각치 말라
    - `Point` 객체는 결국 개념을 표현

- 인수 목록

  - 가변인수에도 같은 원리가 적용됨

    ```java
    void monad(Integer... args);
    void dyad(String name, Integer... args);
    void triad(String name, int count, Integer... args);
    ```

    - 단항, 이항, 삼항 함수로 취급할 수 있고 그 이상의 인수 개수는 문제가 있다.

- 동사와 키워드

  - `write(name);` 이름을 씀 (명확한 이해 가능)
  - `assertExpectedEqualsActual(expected, actual);` 인수 순서를 기억할 필요가 없음

### 부수 효과를 일으키지 마라!

- __남몰래__ 다른 일을 함

- __함수는 한 가지 일만 하라!__

- 출력 인수

  ```java
  // 무언가에 s를 붙이는건지 s에 무언가를 붙이는건지?
  appendFooter(s);

  // 더 이해하기 편함
  report.appendFooter();
  ```

  - __일반적__으로 인수는 __입력__으로 간주
  - __출력 인수__는 피해야 함
  - 함수를 따라가기 전까지는 의미를 명확히 알 수 없음

### 명령과 조회를 분리하라!

- 역시나 __함수는 한 가지 일만 해야 한다.__
- 상태를 변경하던지, 정보를 반환하던지 둘 중 하나만
- ~~`DataHomePhotoItemListFetcher`에 `addDailyHeader()`가 이에 해당~~

### 오류 코드보다 예외를 사용하라!

- 명령/조회 분리 규칙을 미묘하게 위반
- __try/catch__ 블록 뽑아내기
  - 별도 함수로 뽑아내는 편이 좋다.
- 오류처리도 한 가지 작업
- `Error.java` 의존성 자석
  - 오류 코드 대신 `Exception` 클래스에서 파생된 예외를 사용하면 재컴파일/재배치 없이도 추가 가능

### 반복하지 마라!

- 중복은 문제
- 중복을 제거하려는 지속적인 노력을 보여야 한다.

### 구조적 프로그래밍

- `break`, `continue`는 루프 안에서 사용하면 안됨
- `goto`는 사용하면 __절대 안됨__
- __[구조적 프로그래밍](https://ko.wikipedia.org/wiki/%EA%B5%AC%EC%A1%B0%EC%A0%81_%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)__은 함수가 아주 클 때만 상당한 이익을 제공

### 함수를 어떻게 짜죠?

- 글짓기와 비슷
- 한 번에 좋은 함수를 짜기 위해 애쓰지 말 것
- 차근차근 문제점을 찾아내어 수정해 나가면 됨