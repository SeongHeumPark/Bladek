## 단위 테스트

### TDD 법칙 세가지

- __첫째 법칙__
  실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않음
- __둘째 법칙__
  컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성
- __셋째 법칙__
  현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성
- ___주의___
  - 실제 코드와 맞먹는 방대한 테스트 코드는 심각한 관리 문제 유발

### 깨끗한 테스트 코드 유지하기

- 테스트 코드도 코드
- 테스트 코드는 실제 코드 못지 않게 중요
- ___테스트는 유연성, 유지보수성, 재사용성을 제공___
  - 테스트 케이스가 있으면 변경이 두렵지 않음 (공감)

### 깨끗한 테스트 코드

- 가독성, 가독성, 가독성..!!

- __BUILD-OPERATE-CHECK__ 패턴

  ```java
  public void testGetPageHierarchyAsXml() throws Exception {
  	makePages("PageOne", "PageOne.ChildOne", "PageTwo");

  	submitRequest("root", "type:pages");

  	assertResponseIsXML();
   	assertResponseContains("<name>PageOne</name>", "<name>PageTwo</name>", "<name>ChildOne</name>");
  }
  ```

  - 테스트 자료 __생성__
  - 테스트 자료 __조작__
  - 조작한 __결과__가 올바른지 __확인__

- ___도메인에 특화된 테스트 언어___
  - API 조작 대신, __함수와 유틸리티__를 __구현__한 후 __사용__
  - __DSL__
    테스트를 구현하는 당사자와 나중에 테스트를 읽어볼 독자를 도와주는 테스트 __언어__

- ___이중 표준___
  - 실제 코드 표준과 다른데, 이중 표준???
  - 실제 코드처럼 __간결, 표현력 풍부__해야 하지만 __효율하진 않아도 됨__

### 테스트 당 `assert` 하나

- 함수마다 `assert` 문을 단 하나만 사용해야 한다. (주장)
- 함수 하나에 `assert` 문 수를 최대한 줄이자 (목표)
- 즉, ___테스트 당 개념 하나___

### F.I.R.S.T

- __Fast__
  테스트는 빨라야 한다.
- __Independent__
  각 테스트는 서로 의존하면 안 된다.
- __Repeatable__
  테스트는 어떤 환경에서도 반복 가능해야 한다.
- __Self-Validating__
  테스트는 `bool` 값으로 결과를 내야 한다.
- __Timely__
  테스트는 적시에 작성해야 한다.

### 정리

- 테스트 코드도 코드임으로 깨끗함을 유지해야 함