## 03. 주석

`나쁜 코드에 주석을 달지마라. 새로 짜라. - 브라이언 W. 커니핸, P.J. 플라우거`

### 주석은 나쁜 코드를 보완하지 못한다.

- 주석 다는 일반적인 이유
  __코드 품질이 나쁘기 때문__
- 코드 정리 >>>>>>>>>>>>>>>...>>>>>>> 주석 달기

### 코드로 의도를 표현하라!

- 주석 설명을 함수로 표현할 수 있다.

  ```java
  // 직원에게 복지 혜택을 받을 자격이 있는지 검사한다.
  if ((employee.flags & HOURLY_FLAG) && (employee.age > 65)) {
  	// ...
  }

  if (employee.isEligibleForFullBenefits()) {
  	// ...
  }
  ```

### 좋은 주석

- 법적인 주석

  - 저작권 정보
  - 소유권 정보

- 정보를 제공하는 주석

  - 때로는 기본적인 정보를 주석으로 제공하면 편리

    ``` java
    // 테스트 중인 Responder 인스턴스를 반환한다.
    protected abstract Responder responderInstance();
    ```

    - 추상 메서드가 반환할 값

    ```  java
    // kk:mm:ss EEE, MMM dd, yyyy 형식이다.
    Pattern timeMatcher = Pattern.compile("\\d*:\\d*:\\d* \\w*, \\w* \\d* \\d*");
    ```

    - 정규표현식이 표현하는 형식

- 의도를 설명하는 주석

  - 구현의 이해 + 결정에 깔린 의도 설명
    __ex) 스펙 설명??__

- 의미를 명료하게 밝히는 주석

  - __인수__, __반환값__이 표준 라이브러리나 변경치 못하는 코드에 속한다면 주석으로 품

    ```java
    public void testCompareTo() throws Exception {
    	// ...
    	assertTrue(a.compareTo(a) == 0);	// a == a
    	// ...
    }
    ```

- 결과를 경고하는 주석

  - 다른 프로그래머들에게 결과를 경고할 목적으로 사용

- TODO 주석

  - 아래의 상황에 유용
    - 나중에 구현해야될 사항
    - 더 이상 필요 없는 기능을 삭제하라는 알림
    - 누군가에게 문제를 봐달라는 요청
    - 더 좋은 이름을 떠올려달라는 부탁
    - 앞으로 발생할 이벤트에 맞춰 코드를 고치라는 주의
  - 나쁜 코드를 남겨 놓는 핑계가 되어서는 안 됨

- 중요성을 강조하는 주석

- 공개 API에서 Javadocs

  - 자바 프로그램을 짤 때 도움이 됨
  - 다른 주석들과 마찬가지로 주의해야 함 (오도, 잘못된 위치, 그릇된 정보의 가능성)

### 나쁜 주석

- 주절거리는 주석

  - 특별한 이유 X
  - 의무감 or 마지못해 다는 주석

- 같은 이야기를 중복하는 주석

- 오해할 여지가 있는 주석

  - __살짝__ 잘못된 정보로 인해 큰 문제로 이어질 수 있음

- 의무적으로 다는 주석

  - __모든 함수에 javadocs, 모든 변수에 주석을 달야한다__는 규칙은 __어리석음__

- 이력을 기록하는 주석

  - 차라리 __커밋 로그__를 더 잘 남겨라

- 있으나 마나 한 주석

  - 너무 당연한 사실을 정보랍시고 전달

    ```java
    /**
     * 이것은 기본 생성자
     */
    public Overwatch() {
    }
    ```

- 무서운 잡음

  ```java
  /** The name. */
  private String name;

  /** The version. */
  private String version;

  /** The licenceName. */
  private String licenceName;

  /** The version */
  private String info;
  ```

  - 뭐하는...
  - cv 오류도 존재

- 함수나 변수로 표현할 수 있다면 주석을 달지 마라

  - 주석말고 코드로...

- 위치를 표시하는 주석

  - 기능을 모아놓고 주석을 __배너__로 활용

    ```java
    // Actions ////////////////////////////////////////////
    ```

    - 아주 드물게 사용
    - 남용하면 독자가 무시하게 됨

- 닫는 괄호에 다는 주석

  - 코드블럭을 구분할 수 있는 좋은 방법

    ```java
    try {
    	while ((line = in.readLine()) != null) {
    	} // while
    } // try
    catch (Exception e) {
    } // catch
    ```

    - 보통 함수가 긴 경우 사용
    - 함수를 줄이려고 노력하라.

- 공로를 돌리거나 저자를 표시하는 주석

  - 불행하게도 __안드로이드 스튜디오__에서 기본적으로 제공

    ```java
    /** 
     * Created by Jake Park on 2017-02-18. 
     */
    ```

    - __커밋 로그__가 더 났지 않을까?

- 주석으로 처리한 코드

  - 지우고 __커밋 로그__를 확인

- HTML 주석

  - __극혐__
  - 이런 주석도 되긴하는 구나... (감탄)

- 전역 정보

  - 주석에 __시스템의 전반적인 정보__를 기술하지 마라.

    ```java
    /**
     * 적합성 테스트가 동작하는 포트: 기본값은 <b>8082</b>
     *
     * @param fitnessePort
     */
    public void setFitnessePort(int fitnessePort) {
    	this.fitnessePort = fitnessePort;
    }
    ```

    ​

- 너무 많은 정보

  - 과하면 없느니만 못함

- 모호한 관계

  - 모호한 관계
    __주석 자체에 설명이 더 필요한 경우__

- 함수 헤더

- 비공개 코드에서 Javadocs

  - 공개하질 않는데 누가봐?

### 정리

- 저자는 주석이 싫은가 보다.