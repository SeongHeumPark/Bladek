## 객체와 자료 구조

### 자료 추상화

- __자료를__ 세세히 공개하기보단 __추상적 개념으로 표현__하라
- 객체가 포함하는 자료 를 표현할 가장 좋은 방법을 __심각하게 고민하라__
- 아무 생각 없이 getter/setter 함수를 추가하지 마라

### 자료/객체 비대칭

- __절차 지향__적인 클래스 vs. __객체 지향__적인 클래스
  - __절차 지향__은 __함수 추가__는 __쉽고__, __자료구조 추가__는 __어렵다__
  - __객체 지향__은 __함수 추가__는 __어렵고__, __자료구조 추가__는 __쉽다__

### 디미터 법칙

- __정의__

  - __클래스의 메서드__는 __아래의 객체의 메서드만 호출__
    - __클래스__
    - 메서드가 __생성__한 객체
    - 메서드 __파라미터__로 넘어온 객체
    - 클래스의 __인스턴스__ 객체

- __기차 충돌__

  ```java
  final String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();
  ```

  - __조잡__하므로 피하라.
  - 디미터 법칙 __위반의 기준__은 메서드가 리턴하는 것이 __객체__냐 __자료 구조__냐에 따라 다르다
    - __객체__면 __위반__


- __잡종 구조__

  - 절반은 객체, 절반은 자료 구조
  - 어떤걸 보호하고 어떤걸 공개할지 확신하지 못한 __어중간한 설계__

- __구조체 감추기__

  - 객체에게 __뭔가를 하라는__ 메서드를 추가할 것

    - 책에서는 `ctxt`의 절대경로를 가져가는 이유가 __임시 파일을 만들기 위해서__

      ```java
      // ctxt에게 임시 파일 생성하는 일을 시킴
      BufferedOutputStream bos = ctxt.createScratchFileStream(classFileName);
      ```

### 자료 전달 객체

- __DTO__ (Data Transfer Object)
  - 굉장히 유용
  - __통신__(소켓, DB)을 통한 __가공되지 않은 정보__를 애플리케이션 코드에서 사용할 __객체로 변환__할 때 사용
- __Bean__
  - DTO의 비공개 인스턴스에 getter/setter 함수가 있는 구조
  - 별 이익 없음


- __활성 레코드__

  - DTO의 특수한 형태

  - __공개 인스터스__ + __비공개 인스터스__ + __getter/setter 함수__ + __탐색 함수__(save, find)

  - __비지니스 규칙 메서드__까지 추가해서 __객체로 취급하면 곤란__
    __잡종 구조__이므로 바람직하지 않다

  - 해결책

    ```java
    // 활성화 레코드
    public class Address {
       // ...

    	public boolean find() {
        	// ...
    	}
    }

    public class Class {
    	private Address adress;

    	// 비지니스 규칙 메소드
    	// ...
    }
    ```

    - __분리__와 __구성__

### 정리

- __절차__ 지향적, __객체__ 지향적 __클래스__의 __개념__을 __편견 없이 받아들이고 적절하게 사용하라__