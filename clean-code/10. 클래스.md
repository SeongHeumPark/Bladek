## 클래스

### 클래스 체계

```java
public class Class {
	/** 
	 * ===== 변수 목록 =====
	 * static public 변수
	 * static private 변수
	 * private 변수
	 *
	 * ===== 함수 목록 =====
	 * public 함수
	 * ㄴprivate 함수
	 * ㄴprivate 함수
	 * public 함수
	 * ㄴprivate 함수
	 */
}
```

- ___캡슐화___
  - __변수__와 __함수__는 가능한 공개하지 않는 편이 좋다.
    __테스트__를 위해선 `protected`로 허용하기도 함
  - __Decapsulation__ 결정은 __언제나 최후의 수단__

### 클래스는 작아야 한다!

- __기본 규칙__
  작게, 더 작게

- `SuperDashboard` 클래스

  - p.173 → p.175

    ```java
    public class SuperDashboard extends JFrame implements MetaDataUser {
    	public Component getLastFocusedComponent() {
    	}

    	public void setLastFocused(COmponent lastFocused) {
    	}

    	public int getMajorVersionNumber() {
    	}

    	public int getMinorVersionNumber() {
    	}

    	public int getBuildNumber() {
    	}
    }
    ```


- ___SRP___ (Single Responsibility Principle) 원칙
  변경할 이유가 단 하나뿐이어야 한다.
  - `SuperDashboard` 클래스의 __SRP__ 원칙 위반
    - `JFrame`과 `MetaDataUser`의 __두 가지 책임__을 가짐

  - 단일 책임 `Version` 클래스 

    ```java
    public class Version {
    	public int getMajorVersionNumber() {
    	}

    	public int getMinorVersionNumber() {
    	}

    	public int getBuildNumber() {
    	}
    }
    ```

  - 많은 개발자들이 __이해하면서 지키기 수월한 개념__이면서 __무시__하는 원칙

- ___응집도___

  - 클래스는 인스턴스 변수 수가 작아야 한다.
  - 각 클래스 메서드는 인스턴스 변수를 하나 이상 사용해야 한다.
  - 일반적으로 메서드가 변수를 더 많이 사용할수록 메서드와 클래스는 응집도가 더 높다.

  ```java
  public class Stack {
  	private int topOfStack = 0;
  	List<Integer> elements = new LinkedList<>();

  	public int size() {
      	return topOfStack;
  	}

  	public void push(int element) {
      	topOfStack++;
      	elements.add(element);
  	}

  	public int pop() throws PoppedWhenEmpty {
      	if (topOfStack == 0) {
          	throw new PoppedWhenEmpty();
      	}
      
      	int element = elements.get(--topOfStack);
      	elements.remove(topOfStack);
      
      	return element;
  	}
  }
  ```

- ___응집도를 유지하면 작은 클래스 여럿이 나온다.___

  - 큰 함수를 여러 작은 함수로 쪼개다 보면 작은 클래스 여럿으로 쪼갤 기회가 생긴다.

### 변경하기 쉬운 클래스

- `Sql` 클래스

  ```java
  public class Sql {
  	public Sql(String table, Column[] columns) {
  	}

  	public String create() {
  	}

  	public String insert(Object[] fields) {
  	}
  	// ...
  }
  ```

  - __SRP__ 원칙 위반

    - __새로운 SQL문을 지원__하려면 __클래스 수정 필요__
    - 기존 SQL문 하나를 수정하려면 __클래스 수정 필요__

  - __OCP__(Open-Closed Principle) 원칙

    - 확장에 개방적이고 수정에 폐쇄적이어야 한다는 원칙

    ```java
    abstract public class Sql {
    	public Sql(String table, Column[] columns) {
    	}

    	abstract public String generate();
    }

    public class CreateSql extends Sql {
    	public CreateSql(String table, Column[] columns) {
        	super(table, columns);
    	}

    	@Override
    	public String generate() {
    	}
    }

    public class SelectSql extends Sql {
    	public SelectSql(String table, Column[] columns) {
        	super(table, columns);
    	}

    	@Override
    	public String generate() {
    	}
    }

    // ...
    ```

    - __SRP__, __OCP__ 원칙 모두 지키는 아름다운 클래스!


- ___변경으로부터 격리___

  - __DIP__(Dependency Inversion Principle)

    - 클래스가 상세한 구현이 아니라 추상화에 의존해야 한다.

    ```java
    public class Portfolio {
    	private StockExchange exchange;

    	public Portfolio(StockExchange exchange) {
        	this.exchange = exchange;
    	}
    }
    ```

    - `StockExchange` 인터페이스를 __구성__으로 활용

### 정리

- 클래스는 작아야 한다!
- 원칙은 최대한 지켜야 한다. (하지만, 예외란 존재할 수 있음)



